<div class="container">
  <%= simple_form_for @complaint, html: { class: 'form-horizontal' } do |f| %>
    <div class="form-group">
      <%= f.label :company_id, 'Select a Company:', class: 'control-label' %>
      <%= f.collection_select :company_id, Company.all, :id, :company_name, { include_blank: "Select a company" }, { class: 'form-control' } %>
    </div>
    <div class="form-group">
      <%= f.input :title, class: 'form-control' %>
    </div>
    <div class="form-group">
      <%= f.input :review, class: 'form-control' %>
    </div>
    <div class="form-group">
      <%= f.input :comment, as: :text, label: 'Comentário:', input_html: { class: 'form-control' } %>
    </div>
    <div data-controller="new-complaint">
      <button class="btn btn-info" data-action="click->new-complaint#showFormComplaint">Clique aqui se não encontrou a empresa
      </button>
      <div class="mt-4 d-none" data-new-complaint-target="complaintCompanySelect">
        <h3>Especifique a companhia abaixo:</h3>
        <%= f.fields_for :company do |company_fields| %>
          <div class="form-group">
            <%= company_fields.input :company_name, label: "Nome da empresa", class: "form-control" %>
          </div>
          <div class="form-group my-4">
            <%= company_fields.label "Categoria da empresa" %>
            <%= company_fields.select :company_category, options_for_select([["Selecione uma categoria", ""]] + Company::COMPANY_CATEGORY.map { |category| [category, category] }, selected: @complaint.company&.company_category&.first), {}, { class: 'form-control', name: 'complaint[company_attributes][company_category][]' } %>
          </div>
          <div class="form-group">
            <%= company_fields.input :company_city, label: "Cidade da empresa", class: "form-control" %>
          </div>
          <div class="form-group">
            <%= company_fields.input :company_state, label: "Estado da empresa", class: "form-control" %>
          </div>
          <div class="form-group">
            <h4>Social Media Links</h4>
            <%= company_fields.fields_for :company_social_media do |social| %>
              <div class="social-media-group">
                <%= social.input :facebook, class: "form-control" %>
                <%= social.input :twitter, class: "form-control" %>
                <%= social.input :linkedin, class: "form-control" %>
                <%= social.input :instagram, class: "form-control" %>
                <%= social.input :youtube, class: "form-control" %>
                <%= social.input :tiktok, class: "form-control" %>
              </div>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
    <div class="form-group mt-4">
      <%= f.submit "Submit Complaint", class: 'btn btn-primary' %>
    </div>
  <% end %>
</div>
